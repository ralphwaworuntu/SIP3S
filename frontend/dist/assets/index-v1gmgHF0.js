import{r as a,p as Z,g as P,v as F,o as D,l as K,u as H,a as I,j as e,B as x}from"./index-Cb9iWb3X.js";import{u as R,t as B,o as V,s as v,n as W}from"./zod-PrevpNNo.js";import{u as G}from"./useQuery-C79pYyAu.js";import{u as O,m as U}from"./WarningCircle.es-D9kSxDjz.js";import{m as $}from"./ArrowsClockwise.es-B6UTnrte.js";import{u as _,a as q,n as z,s as J}from"./use-camera-D0HlmIOR.js";import{c as Q}from"./SignOut.es-C2N_2s4i.js";import{C as j,a as N,b as y,c as C,d as w}from"./card-D9DWCS54.js";import{B as A}from"./badge-BudpMpDX.js";import{A as k}from"./alert-CMpuOtHs.js";import{t as Y}from"./task-service-BBdJwg2f.js";import"./mock-data-Bmemdn2s.js";const X=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M108,84a16,16,0,1,1,16,16A16,16,0,0,1,108,84Zm128,44A108,108,0,1,1,128,20,108.12,108.12,0,0,1,236,128Zm-24,0a84,84,0,1,0-84,84A84.09,84.09,0,0,0,212,128Zm-72,36.68V132a20,20,0,0,0-20-20,12,12,0,0,0-4,23.32V168a20,20,0,0,0,20,20,12,12,0,0,0,4-23.32Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),a.createElement("path",{d:"M144,176a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176Zm88-48A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128ZM124,96a12,12,0,1,0-12-12A12,12,0,0,0,124,96Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm-4,48a12,12,0,1,1-12,12A12,12,0,0,1,124,72Zm12,112a16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40a8,8,0,0,1,0,16Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M142,176a6,6,0,0,1-6,6,14,14,0,0,1-14-14V128a2,2,0,0,0-2-2,6,6,0,0,1,0-12,14,14,0,0,1,14,14v40a2,2,0,0,0,2,2A6,6,0,0,1,142,176ZM124,94a10,10,0,1,0-10-10A10,10,0,0,0,124,94Zm106,34A102,102,0,1,1,128,26,102.12,102.12,0,0,1,230,128Zm-12,0a90,90,0,1,0-90,90A90.1,90.1,0,0,0,218,128Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M140,176a4,4,0,0,1-4,4,12,12,0,0,1-12-12V128a4,4,0,0,0-4-4,4,4,0,0,1,0-8,12,12,0,0,1,12,12v40a4,4,0,0,0,4,4A4,4,0,0,1,140,176ZM124,92a8,8,0,1,0-8-8A8,8,0,0,0,124,92Zm104,36A100,100,0,1,1,128,28,100.11,100.11,0,0,1,228,128Zm-8,0a92,92,0,1,0-92,92A92.1,92.1,0,0,0,220,128Z"}))]]),e1=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M228.75,100.05c-3.52-3.67-7.15-7.46-8.34-10.33-1.06-2.56-1.14-7.83-1.21-12.47-.15-10-.34-22.44-9.18-31.27s-21.27-9-31.27-9.18c-4.64-.07-9.91-.15-12.47-1.21-2.87-1.19-6.66-4.82-10.33-8.34C148.87,20.46,140.05,12,128,12s-20.87,8.46-27.95,15.25c-3.67,3.52-7.46,7.15-10.33,8.34-2.56,1.06-7.83,1.14-12.47,1.21C67.25,37,54.81,37.14,46,46S37,67.25,36.8,77.25c-.07,4.64-.15,9.91-1.21,12.47-1.19,2.87-4.82,6.66-8.34,10.33C20.46,107.13,12,116,12,128S20.46,148.87,27.25,156c3.52,3.67,7.15,7.46,8.34,10.33,1.06,2.56,1.14,7.83,1.21,12.47.15,10,.34,22.44,9.18,31.27s21.27,9,31.27,9.18c4.64.07,9.91.15,12.47,1.21,2.87,1.19,6.66,4.82,10.33,8.34C107.13,235.54,116,244,128,244s20.87-8.46,27.95-15.25c3.67-3.52,7.46-7.15,10.33-8.34,2.56-1.06,7.83-1.14,12.47-1.21,10-.15,22.44-.34,31.27-9.18s9-21.27,9.18-31.27c.07-4.64.15-9.91,1.21-12.47,1.19-2.87,4.82-6.66,8.34-10.33C235.54,148.87,244,140.05,244,128S235.54,107.13,228.75,100.05Zm-17.32,39.29c-4.82,5-10.28,10.72-13.19,17.76-2.82,6.8-2.93,14.16-3,21.29-.08,5.36-.19,12.71-2.15,14.66s-9.3,2.07-14.66,2.15c-7.13.11-14.49.22-21.29,3-7,2.91-12.73,8.37-17.76,13.19C135.78,214.84,130.4,220,128,220s-7.78-5.16-11.34-8.57c-5-4.82-10.72-10.28-17.76-13.19-6.8-2.82-14.16-2.93-21.29-3-5.36-.08-12.71-.19-14.66-2.15s-2.07-9.3-2.15-14.66c-.11-7.13-.22-14.49-3-21.29-2.91-7-8.37-12.73-13.19-17.76C41.16,135.78,36,130.4,36,128s5.16-7.78,8.57-11.34c4.82-5,10.28-10.72,13.19-17.76,2.82-6.8,2.93-14.16,3-21.29C60.88,72.25,61,64.9,63,63s9.3-2.07,14.66-2.15c7.13-.11,14.49-.22,21.29-3,7-2.91,12.73-8.37,17.76-13.19C120.22,41.16,125.6,36,128,36s7.78,5.16,11.34,8.57c5,4.82,10.72,10.28,17.76,13.19,6.8,2.82,14.16,2.93,21.29,3,5.36.08,12.71.19,14.66,2.15s2.07,9.3,2.15,14.66c.11,7.13.22,14.49,3,21.29,2.91,7,8.37,12.73,13.19,17.76,3.41,3.56,8.57,8.94,8.57,11.34S214.84,135.78,211.43,139.34ZM176.49,95.51a12,12,0,0,1,0,17l-56,56a12,12,0,0,1-17,0l-24-24a12,12,0,1,1,17-17L112,143l47.51-47.52A12,12,0,0,1,176.49,95.51Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M232,128c0,12.51-17.82,21.95-22.68,33.69-4.68,11.32,1.42,30.65-7.78,39.85s-28.53,3.1-39.85,7.78C150,214.18,140.5,232,128,232s-22-17.82-33.69-22.68c-11.32-4.68-30.65,1.42-39.85-7.78s-3.1-28.53-7.78-39.85C41.82,150,24,140.5,24,128s17.82-22,22.68-33.69C51.36,83,45.26,63.66,54.46,54.46S83,51.36,94.31,46.68C106.05,41.82,115.5,24,128,24S150,41.82,161.69,46.68c11.32,4.68,30.65-1.42,39.85,7.78s3.1,28.53,7.78,39.85C214.18,106.05,232,115.5,232,128Z",opacity:"0.2"}),a.createElement("path",{d:"M225.86,102.82c-3.77-3.94-7.67-8-9.14-11.57-1.36-3.27-1.44-8.69-1.52-13.94-.15-9.76-.31-20.82-8-28.51s-18.75-7.85-28.51-8c-5.25-.08-10.67-.16-13.94-1.52-3.56-1.47-7.63-5.37-11.57-9.14C146.28,23.51,138.44,16,128,16s-18.27,7.51-25.18,14.14c-3.94,3.77-8,7.67-11.57,9.14C88,40.64,82.56,40.72,77.31,40.8c-9.76.15-20.82.31-28.51,8S41,67.55,40.8,77.31c-.08,5.25-.16,10.67-1.52,13.94-1.47,3.56-5.37,7.63-9.14,11.57C23.51,109.72,16,117.56,16,128s7.51,18.27,14.14,25.18c3.77,3.94,7.67,8,9.14,11.57,1.36,3.27,1.44,8.69,1.52,13.94.15,9.76.31,20.82,8,28.51s18.75,7.85,28.51,8c5.25.08,10.67.16,13.94,1.52,3.56,1.47,7.63,5.37,11.57,9.14C109.72,232.49,117.56,240,128,240s18.27-7.51,25.18-14.14c3.94-3.77,8-7.67,11.57-9.14,3.27-1.36,8.69-1.44,13.94-1.52,9.76-.15,20.82-.31,28.51-8s7.85-18.75,8-28.51c.08-5.25.16-10.67,1.52-13.94,1.47-3.56,5.37-7.63,9.14-11.57C232.49,146.28,240,138.44,240,128S232.49,109.73,225.86,102.82Zm-11.55,39.29c-4.79,5-9.75,10.17-12.38,16.52-2.52,6.1-2.63,13.07-2.73,19.82-.1,7-.21,14.33-3.32,17.43s-10.39,3.22-17.43,3.32c-6.75.1-13.72.21-19.82,2.73-6.35,2.63-11.52,7.59-16.52,12.38S132,224,128,224s-9.15-4.92-14.11-9.69-10.17-9.75-16.52-12.38c-6.1-2.52-13.07-2.63-19.82-2.73-7-.1-14.33-.21-17.43-3.32s-3.22-10.39-3.32-17.43c-.1-6.75-.21-13.72-2.73-19.82-2.63-6.35-7.59-11.52-12.38-16.52S32,132,32,128s4.92-9.15,9.69-14.11,9.75-10.17,12.38-16.52c2.52-6.1,2.63-13.07,2.73-19.82.1-7,.21-14.33,3.32-17.43S70.51,56.9,77.55,56.8c6.75-.1,13.72-.21,19.82-2.73,6.35-2.63,11.52-7.59,16.52-12.38S124,32,128,32s9.15,4.92,14.11,9.69,10.17,9.75,16.52,12.38c6.1,2.52,13.07,2.63,19.82,2.73,7,.1,14.33.21,17.43,3.32s3.22,10.39,3.32,17.43c.1,6.75.21,13.72,2.73,19.82,2.63,6.35,7.59,11.52,12.38,16.52S224,124,224,128,219.08,137.15,214.31,142.11ZM173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M225.86,102.82c-3.77-3.94-7.67-8-9.14-11.57-1.36-3.27-1.44-8.69-1.52-13.94-.15-9.76-.31-20.82-8-28.51s-18.75-7.85-28.51-8c-5.25-.08-10.67-.16-13.94-1.52-3.56-1.47-7.63-5.37-11.57-9.14C146.28,23.51,138.44,16,128,16s-18.27,7.51-25.18,14.14c-3.94,3.77-8,7.67-11.57,9.14C88,40.64,82.56,40.72,77.31,40.8c-9.76.15-20.82.31-28.51,8S41,67.55,40.8,77.31c-.08,5.25-.16,10.67-1.52,13.94-1.47,3.56-5.37,7.63-9.14,11.57C23.51,109.72,16,117.56,16,128s7.51,18.27,14.14,25.18c3.77,3.94,7.67,8,9.14,11.57,1.36,3.27,1.44,8.69,1.52,13.94.15,9.76.31,20.82,8,28.51s18.75,7.85,28.51,8c5.25.08,10.67.16,13.94,1.52,3.56,1.47,7.63,5.37,11.57,9.14C109.72,232.49,117.56,240,128,240s18.27-7.51,25.18-14.14c3.94-3.77,8-7.67,11.57-9.14,3.27-1.36,8.69-1.44,13.94-1.52,9.76-.15,20.82-.31,28.51-8s7.85-18.75,8-28.51c.08-5.25.16-10.67,1.52-13.94,1.47-3.56,5.37-7.63,9.14-11.57C232.49,146.28,240,138.44,240,128S232.49,109.73,225.86,102.82Zm-52.2,6.84-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35a8,8,0,0,1,11.32,11.32Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M224.42,104.2c-3.9-4.07-7.93-8.27-9.55-12.18-1.5-3.63-1.58-9-1.67-14.68-.14-9.38-.3-20-7.42-27.12S188,42.94,178.66,42.8c-5.68-.09-11-.17-14.68-1.67-3.91-1.62-8.11-5.65-12.18-9.55C145.16,25.22,137.64,18,128,18s-17.16,7.22-23.8,13.58c-4.07,3.9-8.27,7.93-12.18,9.55-3.63,1.5-9,1.58-14.68,1.67-9.38.14-20,.3-27.12,7.42S42.94,68,42.8,77.34c-.09,5.68-.17,11-1.67,14.68-1.62,3.91-5.65,8.11-9.55,12.18C25.22,110.84,18,118.36,18,128s7.22,17.16,13.58,23.8c3.9,4.07,7.93,8.27,9.55,12.18,1.5,3.63,1.58,9,1.67,14.68.14,9.38.3,20,7.42,27.12S68,213.06,77.34,213.2c5.68.09,11,.17,14.68,1.67,3.91,1.62,8.11,5.65,12.18,9.55C110.84,230.78,118.36,238,128,238s17.16-7.22,23.8-13.58c4.07-3.9,8.27-7.93,12.18-9.55,3.63-1.5,9-1.58,14.68-1.67,9.38-.14,20-.3,27.12-7.42s7.28-17.74,7.42-27.12c.09-5.68.17-11,1.67-14.68,1.62-3.91,5.65-8.11,9.55-12.18C230.78,145.16,238,137.64,238,128S230.78,110.84,224.42,104.2Zm-8.66,39.3c-4.67,4.86-9.5,9.9-12,15.9-2.38,5.74-2.48,12.52-2.58,19.08-.11,7.44-.23,15.14-3.9,18.82s-11.38,3.79-18.82,3.9c-6.56.1-13.34.2-19.08,2.58-6,2.48-11,7.31-15.91,12-5.25,5-10.68,10.24-15.49,10.24s-10.24-5.21-15.5-10.24c-4.86-4.67-9.9-9.5-15.9-12-5.74-2.38-12.52-2.48-19.08-2.58-7.44-.11-15.14-.23-18.82-3.9s-3.79-11.38-3.9-18.82c-.1-6.56-.2-13.34-2.58-19.08-2.48-6-7.31-11-12-15.91C35.21,138.24,30,132.81,30,128s5.21-10.24,10.24-15.5c4.67-4.86,9.5-9.9,12-15.9,2.38-5.74,2.48-12.52,2.58-19.08.11-7.44.23-15.14,3.9-18.82s11.38-3.79,18.82-3.9c6.56-.1,13.34-.2,19.08-2.58,6-2.48,11-7.31,15.91-12C117.76,35.21,123.19,30,128,30s10.24,5.21,15.5,10.24c4.86,4.67,9.9,9.5,15.9,12,5.74,2.38,12.52,2.48,19.08,2.58,7.44.11,15.14.23,18.82,3.9s3.79,11.38,3.9,18.82c.1,6.56.2,13.34,2.58,19.08,2.48,6,7.31,11,12,15.91,5,5.25,10.24,10.68,10.24,15.49S220.79,138.24,215.76,143.5ZM172.24,99.76a6,6,0,0,1,0,8.48l-56,56a6,6,0,0,1-8.48,0l-24-24a6,6,0,0,1,8.48-8.48L112,151.51l51.76-51.75A6,6,0,0,1,172.24,99.76Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M225.86,102.82c-3.77-3.94-7.67-8-9.14-11.57-1.36-3.27-1.44-8.69-1.52-13.94-.15-9.76-.31-20.82-8-28.51s-18.75-7.85-28.51-8c-5.25-.08-10.67-.16-13.94-1.52-3.56-1.47-7.63-5.37-11.57-9.14C146.28,23.51,138.44,16,128,16s-18.27,7.51-25.18,14.14c-3.94,3.77-8,7.67-11.57,9.14C88,40.64,82.56,40.72,77.31,40.8c-9.76.15-20.82.31-28.51,8S41,67.55,40.8,77.31c-.08,5.25-.16,10.67-1.52,13.94-1.47,3.56-5.37,7.63-9.14,11.57C23.51,109.72,16,117.56,16,128s7.51,18.27,14.14,25.18c3.77,3.94,7.67,8,9.14,11.57,1.36,3.27,1.44,8.69,1.52,13.94.15,9.76.31,20.82,8,28.51s18.75,7.85,28.51,8c5.25.08,10.67.16,13.94,1.52,3.56,1.47,7.63,5.37,11.57,9.14C109.72,232.49,117.56,240,128,240s18.27-7.51,25.18-14.14c3.94-3.77,8-7.67,11.57-9.14,3.27-1.36,8.69-1.44,13.94-1.52,9.76-.15,20.82-.31,28.51-8s7.85-18.75,8-28.51c.08-5.25.16-10.67,1.52-13.94,1.47-3.56,5.37-7.63,9.14-11.57C232.49,146.28,240,138.44,240,128S232.49,109.73,225.86,102.82Zm-11.55,39.29c-4.79,5-9.75,10.17-12.38,16.52-2.52,6.1-2.63,13.07-2.73,19.82-.1,7-.21,14.33-3.32,17.43s-10.39,3.22-17.43,3.32c-6.75.1-13.72.21-19.82,2.73-6.35,2.63-11.52,7.59-16.52,12.38S132,224,128,224s-9.15-4.92-14.11-9.69-10.17-9.75-16.52-12.38c-6.1-2.52-13.07-2.63-19.82-2.73-7-.1-14.33-.21-17.43-3.32s-3.22-10.39-3.32-17.43c-.1-6.75-.21-13.72-2.73-19.82-2.63-6.35-7.59-11.52-12.38-16.52S32,132,32,128s4.92-9.15,9.69-14.11,9.75-10.17,12.38-16.52c2.52-6.1,2.63-13.07,2.73-19.82.1-7,.21-14.33,3.32-17.43S70.51,56.9,77.55,56.8c6.75-.1,13.72-.21,19.82-2.73,6.35-2.63,11.52-7.59,16.52-12.38S124,32,128,32s9.15,4.92,14.11,9.69,10.17,9.75,16.52,12.38c6.1,2.52,13.07,2.63,19.82,2.73,7,.1,14.33.21,17.43,3.32s3.22,10.39,3.32,17.43c.1,6.75.21,13.72,2.73,19.82,2.63,6.35,7.59,11.52,12.38,16.52S224,124,224,128,219.08,137.15,214.31,142.11ZM173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M223,105.58c-4-4.2-8.2-8.54-10-12.8-1.65-4-1.73-9.53-1.82-15.41-.14-9-.29-19.19-6.83-25.74s-16.74-6.69-25.74-6.83c-5.88-.09-11.43-.17-15.41-1.82-4.26-1.76-8.6-5.93-12.8-9.95-6.68-6.41-13.59-13-22.42-13s-15.74,6.62-22.42,13c-4.2,4-8.54,8.2-12.8,10-4,1.65-9.53,1.73-15.41,1.82-9,.14-19.19.29-25.74,6.83S44.94,68.37,44.8,77.37c-.09,5.88-.17,11.43-1.82,15.41-1.76,4.26-5.93,8.6-9.95,12.8-6.41,6.68-13,13.59-13,22.42s6.62,15.74,13,22.42c4,4.2,8.2,8.54,10,12.8,1.65,4,1.73,9.53,1.82,15.41.14,9,.29,19.19,6.83,25.74s16.74,6.69,25.74,6.83c5.88.09,11.43.17,15.41,1.82,4.26,1.76,8.6,5.93,12.8,9.95,6.68,6.41,13.59,13,22.42,13s15.74-6.62,22.42-13c4.2-4,8.54-8.2,12.8-10,4-1.65,9.53-1.73,15.41-1.82,9-.14,19.19-.29,25.74-6.83s6.69-16.74,6.83-25.74c.09-5.88.17-11.43,1.82-15.41,1.76-4.26,5.93-8.6,9.95-12.8,6.41-6.68,13-13.59,13-22.42S229.38,112.26,223,105.58Zm-5.78,39.3c-4.54,4.73-9.24,9.63-11.57,15.28-2.23,5.39-2.33,12-2.43,18.35-.12,8.2-.24,16-4.49,20.2s-12,4.37-20.2,4.49c-6.37.1-13,.2-18.35,2.43-5.65,2.33-10.55,7-15.28,11.57C139.09,222.75,133.62,228,128,228s-11.09-5.25-16.88-10.8c-4.73-4.54-9.63-9.24-15.28-11.57-5.39-2.23-12-2.33-18.35-2.43-8.2-.12-15.95-.24-20.2-4.49s-4.37-12-4.49-20.2c-.1-6.37-.2-13-2.43-18.35-2.33-5.65-7-10.55-11.57-15.28C33.25,139.09,28,133.62,28,128s5.25-11.09,10.8-16.88c4.54-4.73,9.24-9.63,11.57-15.28,2.23-5.39,2.33-12,2.43-18.35.12-8.2.24-15.95,4.49-20.2s12-4.37,20.2-4.49c6.37-.1,13-.2,18.35-2.43,5.65-2.33,10.55-7,15.28-11.57C116.91,33.25,122.38,28,128,28s11.09,5.25,16.88,10.8c4.73,4.54,9.63,9.24,15.28,11.57,5.39,2.23,12,2.33,18.35,2.43,8.2.12,16,.24,20.2,4.49s4.37,12,4.49,20.2c.1,6.37.2,13,2.43,18.35,2.33,5.65,7,10.55,11.57,15.28,5.55,5.79,10.8,11.26,10.8,16.88S222.75,139.09,217.2,144.88Zm-46.37-43.71a4,4,0,0,1,0,5.66l-56,56a4,4,0,0,1-5.66,0l-24-24a4,4,0,0,1,5.66-5.66L112,154.34l53.17-53.17A4,4,0,0,1,170.83,101.17Z"}))]]),E=a.forwardRef((t,o)=>a.createElement(Z,{ref:o,...t,weights:X}));E.displayName="InfoIcon";const a1=E,M=a.forwardRef((t,o)=>a.createElement(Z,{ref:o,...t,weights:e1}));M.displayName="SealCheckIcon";class s1{async kirimLaporan(o){const d={...o,createdAt:new Date().toISOString(),status:"terkirim"};try{const{data:u}=await P.post("/reports",d);return u}catch{const l=F(),c={...d,id:l,status:"pending"};if(await D.persistPendingReport({id:l,payload:c}),"serviceWorker"in navigator){const r=(await navigator.serviceWorker.ready).sync;r&&await r.register(K.laporan)}return c}}}const t1=new s1,n1=V({komoditas:v().min(2,"Wajib diisi"),kuotaTersalurkan:W().min(0,"Wajib diisi").max(1e4,"Maksimal 10.000 Kg"),catatan:v().min(5,"Jelaskan temuan di lapangan")}),r1="Kg",i1={success:e.jsx(M,{className:"h-5 w-5",weight:"bold"}),info:e.jsx(a1,{className:"h-5 w-5",weight:"bold"}),error:e.jsx(U,{className:"h-5 w-5",weight:"bold"})},g={"end-user":{title:"Petugas Lapangan",subtitle:"Semua data disimpan otomatis walau tanpa koneksi.",heroHighlight:"Petugas Lapangan"},bhabinkamtibmas:{title:"Bhabinkamtibmas",subtitle:"Catat kondisi keamanan distribusi dan koordinasikan dengan PPL.",heroHighlight:"Bhabinkamtibmas"},ppl:{title:"Penyuluh Pertanian Lapangan",subtitle:"Laporkan perkembangan distribusi dan dukung petani di wilayah kerja Anda.",heroHighlight:"Penyuluh Pertanian Lapangan"}},b1=()=>{const{user:t,logout:o}=H(),d=(t==null?void 0:t.role)??"end-user",u=g[d],l=d==="bhabinkamtibmas"?"ppl":d==="ppl"?"bhabinkamtibmas":null,{isOnline:c}=I(),n=_(),r=q(),[m,h]=a.useState(null),{data:f=[]}=G({queryKey:["tasks","assigned"],queryFn:()=>Y.list()}),p=a.useMemo(()=>t!=null&&t.email?f.filter(s=>s.assignedTo.includes(t.email)):f,[f,t==null?void 0:t.email]),S=a.useMemo(()=>p.filter(s=>s.assignedTo.length>1),[p]),L=a.useMemo(()=>p.filter(s=>s.assignedTo.length===1),[p]),i=R({resolver:B(n1),defaultValues:{komoditas:"",kuotaTersalurkan:0,catatan:""}}),b=O({mutationFn:t1.kirimLaporan,onSuccess:s=>{i.reset(),r.restart(),s.status==="pending"?h({type:"info",message:"Laporan tersimpan offline dan akan tersinkron otomatis ketika koneksi kembali."}):h({type:"success",message:"Laporan berhasil dikirim ke server."})},onError:()=>{h({type:"error",message:"Gagal mengirim laporan. Periksa koneksi atau coba ulang."})}}),T=async s=>{if(h(null),!n.latitude||!n.longitude){i.setError("catatan",{message:"GPS belum siap. Aktifkan lokasi."});return}if(!r.preview){i.setError("catatan",{message:"Ambil foto lapangan terlebih dahulu."});return}await b.mutateAsync({komoditas:s.komoditas,kuotaTersalurkan:s.kuotaTersalurkan,catatan:s.catatan,fotoUrl:r.preview,authorId:(t==null?void 0:t.email)??"",lokasi:{latitude:n.latitude,longitude:n.longitude,alamat:n.alamat}})};return a.useEffect(()=>{var s;c&&(s=navigator.serviceWorker)!=null&&s.controller&&navigator.serviceWorker.controller.postMessage("force-sync")},[c]),a.useEffect(()=>{if(!m)return;const s=window.setTimeout(()=>h(null),6e3);return()=>window.clearTimeout(s)},[m]),e.jsxs("main",{className:"mx-auto flex min-h-screen max-w-5xl flex-col gap-6 px-4 py-8",children:[m&&e.jsxs(k,{variant:m.type==="error"?"error":m.type==="info"?"info":"success",className:"flex items-center gap-3 text-sm",children:[i1[m.type],e.jsx("span",{children:m.message})]}),e.jsx("header",{className:"rounded-3xl border border-hijau-hutan/30 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-netral",children:u.title}),e.jsx("h1",{className:"text-2xl font-semibold text-hijau-hutan",children:(t==null?void 0:t.nama)??u.heroHighlight}),e.jsx("p",{className:"text-xs text-slate-netral",children:u.subtitle}),l&&e.jsxs("p",{className:"mt-2 text-xs text-slate-netral",children:["Kolaborasi dengan ",g[l].heroHighlight," memastikan distribusi aman dan tepat sasaran."]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{variant:c?"success":"warning",children:c?"Online":"Offline"}),e.jsxs(x,{variant:"outline",onClick:o,children:[e.jsx(Q,{className:"mr-2 h-4 w-4",weight:"bold"})," Keluar"]})]})]})}),e.jsxs("section",{className:"grid gap-4 lg:grid-cols-[1.1fr_0.9fr]",children:[e.jsxs(j,{className:"bg-white",children:[e.jsxs(N,{children:[e.jsx(y,{children:"Input Laporan Lapangan"}),e.jsx(C,{children:"Pastikan foto diambil langsung dari lokasi."})]}),e.jsx(w,{children:e.jsxs("form",{className:"space-y-4",onSubmit:i.handleSubmit(T),children:[e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-teks-gelap",children:["Komoditas",e.jsx("input",{className:"rounded-2xl border border-abu-kartu px-3 py-2",placeholder:"Contoh: Pupuk Urea",...i.register("komoditas")}),i.formState.errors.komoditas&&e.jsx("span",{className:"text-xs text-oranye-hangat",children:i.formState.errors.komoditas.message})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-teks-gelap",children:["Kuota tersalurkan (",r1,")",e.jsx("input",{type:"number",min:"0",className:"rounded-2xl border border-abu-kartu px-3 py-2",...i.register("kuotaTersalurkan",{valueAsNumber:!0})}),e.jsx("span",{className:"text-xs text-slate-netral",children:"Masukkan jumlah penyaluran dalam kilogram."}),i.formState.errors.kuotaTersalurkan&&e.jsx("span",{className:"text-xs text-oranye-hangat",children:i.formState.errors.kuotaTersalurkan.message})]}),e.jsxs("label",{className:"flex flex-col gap-2 text-sm text-teks-gelap",children:["Catatan lapangan",e.jsx("textarea",{rows:3,className:"rounded-2xl border border-abu-kartu px-3 py-2",placeholder:"Tuliskan kondisi distribusi atau kendala",...i.register("catatan")}),i.formState.errors.catatan&&e.jsx("span",{className:"text-xs text-oranye-hangat",children:i.formState.errors.catatan.message})]}),e.jsxs("div",{className:"space-y-2 rounded-2xl border border-abu-kartu p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-teks-gelap",children:"Lokasi"}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:n.refresh,disabled:n.isLoading,className:"inline-flex items-center gap-1",children:[e.jsx($,{className:`h-4 w-4 ${n.isLoading?"animate-spin":""}`,weight:"bold"}),e.jsx("span",{children:n.isLoading?"Memuat":"Segarkan"})]})]}),e.jsx("p",{className:"text-xs text-slate-netral",children:n.latitude&&n.longitude?n.alamat:n.isLoading?"Mengambil koordinat...":"Lokasi belum tersedia. Tekan segarkan untuk mencoba kembali."}),n.error&&e.jsxs("p",{className:"text-xs text-oranye-hangat",children:["GPS: ",n.error]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-teks-gelap",children:"Foto Lapangan"}),r.streamError&&e.jsx(k,{variant:"warning",children:r.streamError}),r.preview?e.jsxs("div",{className:"space-y-3",children:[e.jsx("img",{src:r.preview,alt:"Hasil foto lapangan",className:"h-56 w-full rounded-2xl object-cover"}),e.jsxs(x,{type:"button",variant:"outline",onClick:r.restart,children:[e.jsx(J,{className:"mr-2 h-5 w-5",weight:"bold"})," Ambil Ulang"]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("video",{ref:r.videoRef,autoPlay:!0,playsInline:!0,className:"h-56 w-full rounded-2xl bg-black/60 object-cover"}),e.jsx("canvas",{ref:r.canvasRef,className:"hidden"}),e.jsxs(x,{type:"button",className:"w-full",onClick:r.capturePhoto,children:[e.jsx(z,{className:"mr-2 h-5 w-5",weight:"bold"})," Ambil Foto"]})]})]}),e.jsx(x,{type:"submit",className:"w-full",disabled:b.isPending,children:b.isPending?"Menyimpan...":"Kirim Laporan"}),e.jsx(k,{variant:"info",className:"text-xs",children:c?"Laporan akan langsung dikirim ke server.":"Anda offline. Data disimpan dan akan tersinkron otomatis."})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(j,{className:"bg-white",children:[e.jsxs(N,{children:[e.jsx(y,{children:"Tugas Anda"}),e.jsx(C,{children:"Disusun oleh Admin Spesialis"})]}),e.jsxs(w,{className:"space-y-3 text-sm text-slate-netral",children:[p.map(s=>e.jsxs("div",{className:"rounded-2xl border border-abu-kartu p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-teks-gelap",children:s.title}),e.jsx(A,{variant:s.status==="selesai"?"success":"warning",children:s.status})]}),e.jsx("p",{children:s.description}),e.jsxs("p",{className:"text-xs",children:["Wilayah: ",s.region," � Batas ",new Date(s.dueDate).toLocaleDateString("id-ID")]}),s.assignedTo.length>1&&l&&e.jsxs("p",{className:"text-xs text-biru-pemerintah",children:["Koordinasi dengan ",g[l].heroHighlight]})]},s.id)),p.length===0&&e.jsx("p",{children:"Tidak ada tugas aktif."})]})]}),l&&e.jsxs(j,{className:"bg-white/90",children:[e.jsxs(N,{children:[e.jsx(y,{children:"Kolaborasi Lapangan"}),e.jsxs(C,{children:["Perbarui progres bersama ",g[l].heroHighlight]})]}),e.jsxs(w,{className:"space-y-3 text-sm text-slate-netral",children:[S.length>0?S.map(s=>e.jsxs("div",{className:"rounded-2xl border border-abu-kartu/70 p-3",children:[e.jsx("p",{className:"font-medium text-teks-gelap",children:s.title}),e.jsxs("p",{className:"text-xs text-slate-netral",children:["Progres terakhir: ",new Date(s.updatedAt).toLocaleString("id-ID")]})]},s.id)):e.jsx("p",{children:"Belum ada tugas gabungan aktif. Terus sinkronkan temuan di lapangan."}),L.length>0&&e.jsxs(k,{variant:"info",className:"text-xs",children:["Catat hal kritis dari tugas mandiri untuk dibagikan kepada ",g[l].heroHighlight,"."]})]})]})]})]})]})};export{b1 as default};
//# sourceMappingURL=index-v1gmgHF0.js.map
