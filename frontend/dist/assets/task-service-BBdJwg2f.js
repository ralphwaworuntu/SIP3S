import{g as p}from"./index-Cb9iWb3X.js";import{d as o}from"./mock-data-Bmemdn2s.js";const w="sip3s.tasks",i=n=>n.map(t=>({...t,assignedTo:[...t.assignedTo]})),d=()=>{if(typeof window>"u")return i(o);try{const n=window.localStorage.getItem(w);if(!n)return window.localStorage.setItem(w,JSON.stringify(o)),i(o);const t=JSON.parse(n);return!t||!Array.isArray(t)?i(o):i(t)}catch(n){return console.warn("Gagal membaca cache tugas",n),i(o)}},u=n=>{if(!(typeof window>"u"))try{window.localStorage.setItem(w,JSON.stringify(n))}catch(t){console.warn("Gagal menyimpan cache tugas",t)}};class g{async list(){try{const{data:t}=await p.get("/tasks");return u(t),t}catch{return d()}}async assign(t){try{const{data:s}=await p.post("/tasks",t),r=d(),a=[s,...r.filter(e=>e.id!==s.id)];return u(a),s}catch{const r={...t,updatedAt:new Date().toISOString()},a=d(),e=[r,...a.filter(c=>c.id!==r.id)];return u(e),r}}async updateStatus(t,s){try{const{data:r}=await p.patch(`/tasks/${t}/status`,{status:s}),e=d().map(c=>c.id===r.id?r:c);return u(e),r}catch{const a=d(),e=a.findIndex(l=>l.id===t);if(e===-1)return null;const c={...a[e],status:s,updatedAt:new Date().toISOString()},f=a.map(l=>l.id===t?c:l);return u(f),c}}}const m=new g;export{m as t};
//# sourceMappingURL=task-service-BBdJwg2f.js.map
