import{u as j,h as b,r as n,j as e}from"./index-CHgft2lY.js";import{u as f}from"./useQuery-MNioBGo0.js";import{c as N}from"./CalendarBlank.es-Gotp_62P.js";import{p as k}from"./MapPinLine.es-BnBamJ0U.js";import{n as w}from"./UsersThree.es-B0y9fPdb.js";import{A as y}from"./alert-CxxZB5vu.js";import{B as v}from"./badge-1jXCihSW.js";import{C as r,a as l,b as d,c,d as o}from"./card-D1DJHsi0.js";import{t as T}from"./task-service-CAbeWILm.js";import"./mock-data-CaIK6OKu.js";const p={baru:{label:"Baru",variant:"warning"},proses:{label:"Proses",variant:"neutral"},selesai:{label:"Selesai",variant:"success"}},D={low:"Prioritas rendah",medium:"Prioritas sedang",high:"Prioritas tinggi"},h=s=>new Date(s).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long"}),F=()=>{const{user:s}=j(),{isOnline:g}=b(),{data:i=[],isLoading:u}=f({queryKey:["tasks","bhabin"],queryFn:()=>T.list()}),t=n.useMemo(()=>s!=null&&s.email?i.filter(a=>a.assignedTo.includes(s.email)):i,[i,s==null?void 0:s.email]),m=n.useMemo(()=>t.filter(a=>a.assignedTo.length>1),[t]),x=n.useMemo(()=>t.filter(a=>a.assignedTo.length===1),[t]);return e.jsxs("section",{className:"space-y-4",children:[!g&&e.jsx(y,{variant:"warning",children:"Data tugas diambil dari cache. Periksa kembali saat koneksi sudah normal."}),e.jsxs(r,{className:"bg-white",children:[e.jsxs(l,{children:[e.jsx(d,{children:"Tugas prioritas Bhabinkamtibmas"}),e.jsx(c,{children:"Koordinasikan dengan PPL dan petugas lapangan sesuai wilayah penugasan."})]}),e.jsx(o,{className:"space-y-3 text-sm text-slate-netral",children:u?e.jsx("p",{children:"Memuat daftar tugas..."}):t.length===0?e.jsx("p",{children:"Belum ada tugas yang ditetapkan untuk Anda."}):t.map(a=>e.jsxs("div",{className:"rounded-2xl border border-abu-kartu p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-semibold text-teks-gelap",children:a.title}),e.jsx("p",{className:"text-xs text-slate-netral",children:D[a.priority]})]}),e.jsx(v,{variant:p[a.status].variant,children:p[a.status].label})]}),e.jsx("p",{className:"mt-2 text-sm",children:a.description}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-4 text-xs text-slate-netral",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(k,{weight:"bold",className:"h-4 w-4"})," ",a.region]}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(N,{weight:"bold",className:"h-4 w-4"})," ",h(a.dueDate)]}),a.assignedTo.length>1&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-biru-pemerintah",children:[e.jsx(w,{weight:"bold",className:"h-4 w-4"})," Kerja tim lintas instansi"]})]})]},a.id))})]}),e.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[e.jsxs(r,{className:"bg-white",children:[e.jsxs(l,{children:[e.jsx(d,{children:"Tugas kolaboratif"}),e.jsx(c,{children:"Libatkan PPL atau petugas lapangan untuk percepatan tindakan."})]}),e.jsx(o,{className:"space-y-3 text-sm text-slate-netral",children:m.length===0?e.jsx("p",{children:"Tidak ada tugas gabungan yang aktif."}):m.map(a=>e.jsxs("div",{className:"rounded-2xl border border-abu-kartu/70 p-3",children:[e.jsx("p",{className:"font-medium text-teks-gelap",children:a.title}),e.jsxs("p",{className:"text-xs",children:["Update terakhir: ",new Date(a.updatedAt).toLocaleString("id-ID")]})]},a.id))})]}),e.jsxs(r,{className:"bg-white/95",children:[e.jsxs(l,{children:[e.jsx(d,{children:"Tugas mandiri"}),e.jsx(c,{children:"Fokus pada pengecekan lapangan harian."})]}),e.jsx(o,{className:"space-y-3 text-sm text-slate-netral",children:x.length===0?e.jsx("p",{children:"Semua tugas saat ini bersifat kolaboratif."}):x.map(a=>e.jsxs("div",{className:"rounded-2xl border border-abu-kartu p-3",children:[e.jsx("p",{className:"font-medium text-teks-gelap",children:a.title}),e.jsxs("p",{className:"text-xs",children:["Target selesai: ",h(a.dueDate)]})]},a.id))})]})]})]})};export{F as default};
//# sourceMappingURL=tasks-B1tHnk8m.js.map
