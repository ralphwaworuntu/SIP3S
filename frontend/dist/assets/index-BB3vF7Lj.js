import{u as h,h as p,r,j as a,B as b,N as f,O as g}from"./index-CHgft2lY.js";import{u as j}from"./useQuery-MNioBGo0.js";import{c as y}from"./SignOut.es-CgT6o7lR.js";import{B as N}from"./badge-1jXCihSW.js";import{b as k}from"./bhabin-service-CDJ-XKa-.js";import"./mock-data-CaIK6OKu.js";const v=[{label:"Tugas Lapangan",to:".",end:!0},{label:"Verifikasi Penyaluran",to:"verifikasi"},{label:"Perkembangan Tanaman",to:"tanaman"},{label:"Verifikasi Hasil Panen",to:"panen"},{label:"Permintaan Pengawalan",to:"pengawalan"}],S=()=>{var x,o,c;const{user:t,logout:u}=h(),{isOnline:d}=p(),[n,m]=r.useState(null),s=j({queryKey:["bhabin-assignments",t==null?void 0:t.email],queryFn:()=>k.listAssignments(t==null?void 0:t.email),enabled:!!(t!=null&&t.email),staleTime:5*60*1e3});r.useEffect(()=>{!n&&s.data&&s.data.length>0&&m(s.data[0].id)},[s.data,n]);const l=r.useMemo(()=>{var e;return((e=s.data)==null?void 0:e.find(i=>i.id===n))??void 0},[s.data,n]);return a.jsxs("main",{className:"mx-auto flex min-h-screen max-w-7xl flex-col gap-6 px-4 py-8",children:[a.jsxs("header",{className:"rounded-3xl border border-abu-kartu bg-white p-6 shadow-sm",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-netral",children:"Bhabinkamtibmas"}),a.jsx("h1",{className:"text-2xl font-semibold text-teks-gelap",children:(t==null?void 0:t.nama)??"Bhabin"}),a.jsx("p",{className:"text-xs text-slate-netral",children:"Mulai dari membaca tugas, verifikasi penyaluran, sampai pengawalan panen di wilayah binaan."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(N,{variant:d?"success":"warning",children:d?"Online":"Offline"}),a.jsxs(b,{variant:"outline",onClick:u,children:[a.jsx(y,{className:"mr-2 h-4 w-4",weight:"bold"})," Keluar"]})]})]}),a.jsxs("div",{className:"mt-4 flex flex-col gap-2 text-sm text-slate-netral",children:[a.jsxs("label",{className:"flex flex-col gap-1",children:["Wilayah kerja aktif",a.jsx("select",{value:n??"",onChange:e=>m(e.target.value),className:"w-full rounded-2xl border border-abu-kartu px-3 py-2 text-sm",disabled:((x=s.data)==null?void 0:x.length)===0,children:(o=s.data)==null?void 0:o.map(e=>a.jsxs("option",{value:e.id,children:[e.wilayahName," â€¢ Kecamatan ",e.kecamatan]},e.id))})]}),s.isLoading&&a.jsx("span",{className:"text-xs text-slate-netral",children:"Memuat wilayah tugas..."}),((c=s.data)==null?void 0:c.length)===0&&!s.isLoading&&a.jsx("span",{className:"text-xs text-oranye-hangat",children:"Belum ada wilayah terdaftar. Hubungi Admin Spesialis untuk mendapatkan assignment."}),l&&a.jsxs("p",{className:"text-xs text-slate-netral",children:["Aktif di ",l.wilayahName,", Desa ",l.desa,", Kecamatan ",l.kecamatan,"."]})]}),a.jsx("nav",{className:"mt-6 flex flex-wrap gap-2 text-sm",children:v.map(e=>a.jsx(f,{to:e.to,end:e.end,className:({isActive:i})=>i?"rounded-2xl border border-biru-pemerintah bg-biru-pemerintah/10 px-4 py-2 font-medium text-biru-pemerintah":"rounded-2xl border border-transparent px-4 py-2 text-slate-netral transition hover:border-biru-pemerintah/40 hover:text-biru-pemerintah",children:e.label},e.label))})]}),a.jsx(g,{context:{selectedAssignment:l}})]})};export{S as default};
//# sourceMappingURL=index-BB3vF7Lj.js.map
