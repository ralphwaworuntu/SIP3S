import{r as e,p as j,u as H,a as b,j as a}from"./index-Cb9iWb3X.js";import{u as f}from"./useQuery-C79pYyAu.js";import{p as v}from"./MapPinLine.es-CKveZeEs.js";import{n as N}from"./UsersThree.es-DBSrDudD.js";import{A as w}from"./alert-CMpuOtHs.js";import{B as A}from"./badge-BudpMpDX.js";import{C as l,a as d,b as c,c as m,d as o}from"./card-D9DWCS54.js";import{t as M}from"./task-service-BBdJwg2f.js";import"./mock-data-Bmemdn2s.js";const k=new Map([["bold",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,28H188V24a12,12,0,0,0-24,0v4H92V24a12,12,0,0,0-24,0v4H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V48A20,20,0,0,0,208,28ZM68,52a12,12,0,0,0,24,0h72a12,12,0,0,0,24,0h16V76H52V52ZM52,204V100H204V204Z"}))],["duotone",e.createElement(e.Fragment,null,e.createElement("path",{d:"M216,48V88H40V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),e.createElement("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Z"}))],["fill",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,48H48V48H72v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24Z"}))],["light",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,34H182V24a6,6,0,0,0-12,0V34H86V24a6,6,0,0,0-12,0V34H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V48A14,14,0,0,0,208,34ZM48,46H74V56a6,6,0,0,0,12,0V46h84V56a6,6,0,0,0,12,0V46h26a2,2,0,0,1,2,2V82H46V48A2,2,0,0,1,48,46ZM208,210H48a2,2,0,0,1-2-2V94H210V208A2,2,0,0,1,208,210Z"}))],["regular",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,32H184V24a8,8,0,0,0-16,0v8H88V24a8,8,0,0,0-16,0v8H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM72,48v8a8,8,0,0,0,16,0V48h80v8a8,8,0,0,0,16,0V48h24V80H48V48ZM208,208H48V96H208V208Z"}))],["thin",e.createElement(e.Fragment,null,e.createElement("path",{d:"M208,36H180V24a4,4,0,0,0-8,0V36H84V24a4,4,0,0,0-8,0V36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V48A12,12,0,0,0,208,36ZM48,44H76V56a4,4,0,0,0,8,0V44h88V56a4,4,0,0,0,8,0V44h28a4,4,0,0,1,4,4V84H44V48A4,4,0,0,1,48,44ZM208,212H48a4,4,0,0,1-4-4V92H212V208A4,4,0,0,1,208,212Z"}))]]),u=e.forwardRef((t,r)=>e.createElement(j,{ref:r,...t,weights:k}));u.displayName="CalendarBlankIcon";const y=u,x={baru:{label:"Baru",variant:"warning"},proses:{label:"Proses",variant:"neutral"},selesai:{label:"Selesai",variant:"success"}},Z={low:"Prioritas rendah",medium:"Prioritas sedang",high:"Prioritas tinggi"},g=t=>new Date(t).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long"}),I=()=>{const{user:t}=H(),{isOnline:r}=b(),{data:i=[],isLoading:V}=f({queryKey:["tasks","bhabin"],queryFn:()=>M.list()}),n=e.useMemo(()=>t!=null&&t.email?i.filter(s=>s.assignedTo.includes(t.email)):i,[i,t==null?void 0:t.email]),h=e.useMemo(()=>n.filter(s=>s.assignedTo.length>1),[n]),p=e.useMemo(()=>n.filter(s=>s.assignedTo.length===1),[n]);return a.jsxs("section",{className:"space-y-4",children:[!r&&a.jsx(w,{variant:"warning",children:"Data tugas diambil dari cache. Periksa kembali saat koneksi sudah normal."}),a.jsxs(l,{className:"bg-white",children:[a.jsxs(d,{children:[a.jsx(c,{children:"Tugas prioritas Bhabinkamtibmas"}),a.jsx(m,{children:"Koordinasikan dengan PPL dan petugas lapangan sesuai wilayah penugasan."})]}),a.jsx(o,{className:"space-y-3 text-sm text-slate-netral",children:V?a.jsx("p",{children:"Memuat daftar tugas..."}):n.length===0?a.jsx("p",{children:"Belum ada tugas yang ditetapkan untuk Anda."}):n.map(s=>a.jsxs("div",{className:"rounded-2xl border border-abu-kartu p-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-base font-semibold text-teks-gelap",children:s.title}),a.jsx("p",{className:"text-xs text-slate-netral",children:Z[s.priority]})]}),a.jsx(A,{variant:x[s.status].variant,children:x[s.status].label})]}),a.jsx("p",{className:"mt-2 text-sm",children:s.description}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-4 text-xs text-slate-netral",children:[a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(v,{weight:"bold",className:"h-4 w-4"})," ",s.region]}),a.jsxs("span",{className:"inline-flex items-center gap-1",children:[a.jsx(y,{weight:"bold",className:"h-4 w-4"})," ",g(s.dueDate)]}),s.assignedTo.length>1&&a.jsxs("span",{className:"inline-flex items-center gap-1 text-biru-pemerintah",children:[a.jsx(N,{weight:"bold",className:"h-4 w-4"})," Kerja tim lintas instansi"]})]})]},s.id))})]}),a.jsxs("div",{className:"grid gap-4 lg:grid-cols-2",children:[a.jsxs(l,{className:"bg-white",children:[a.jsxs(d,{children:[a.jsx(c,{children:"Tugas kolaboratif"}),a.jsx(m,{children:"Libatkan PPL atau petugas lapangan untuk percepatan tindakan."})]}),a.jsx(o,{className:"space-y-3 text-sm text-slate-netral",children:h.length===0?a.jsx("p",{children:"Tidak ada tugas gabungan yang aktif."}):h.map(s=>a.jsxs("div",{className:"rounded-2xl border border-abu-kartu/70 p-3",children:[a.jsx("p",{className:"font-medium text-teks-gelap",children:s.title}),a.jsxs("p",{className:"text-xs",children:["Update terakhir: ",new Date(s.updatedAt).toLocaleString("id-ID")]})]},s.id))})]}),a.jsxs(l,{className:"bg-white/95",children:[a.jsxs(d,{children:[a.jsx(c,{children:"Tugas mandiri"}),a.jsx(m,{children:"Fokus pada pengecekan lapangan harian."})]}),a.jsx(o,{className:"space-y-3 text-sm text-slate-netral",children:p.length===0?a.jsx("p",{children:"Semua tugas saat ini bersifat kolaboratif."}):p.map(s=>a.jsxs("div",{className:"rounded-2xl border border-abu-kartu p-3",children:[a.jsx("p",{className:"font-medium text-teks-gelap",children:s.title}),a.jsxs("p",{className:"text-xs",children:["Target selesai: ",g(s.dueDate)]})]},s.id))})]})]})]})};export{I as default};
//# sourceMappingURL=tasks-BfJtfsUh.js.map
